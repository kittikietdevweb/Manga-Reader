
<section 
  class="animate-fade-in flex flex-col items-center"
  (touchstart)="onTouchStart($event)"
  (touchend)="onTouchEnd($event)">
  <div class="w-full bg-gray-800 p-4 rounded-lg shadow-lg mb-4 sticky top-[70px] z-40">
    <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
      <button (click)="goBack()" class="inline-flex items-center px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white font-semibold rounded-lg shadow-md transition-colors duration-300 w-full sm:w-auto">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Back to Details
      </button>
      <div class="text-center">
        <h2 class="text-xl font-bold text-white truncate">{{ manga().title }}</h2>
        <p class="text-sm text-gray-400">Chapter {{ chapter().chapterNumber }}: {{ chapter().title }}</p>
      </div>
      <div class="font-mono text-lg text-white w-full sm:w-auto text-center">
        {{ currentPageIndex() + 1 }} / {{ totalPages() }}
      </div>
    </div>
    <div class="w-full bg-gray-600 rounded-full h-2 mt-4">
      <div class="bg-indigo-500 h-2 rounded-full transition-all duration-300" [style.width.%]="progress()"></div>
    </div>
  </div>

  <div class="w-full max-w-4xl mx-auto flex flex-col items-center">
    @if (currentPage(); as page) {
      <div class="relative w-full">
        <img 
          [ngSrc]="page.imageUrl" 
          [alt]="'Page ' + page.pageNumber"
          width="800"
          height="1200"
          priority
          class="w-full h-auto rounded-lg shadow-2xl bg-gray-700" />
      </div>
    } @else {
      <p class="text-gray-400 py-20">Loading page...</p>
    }
  </div>

  <div class="w-full flex justify-center items-center gap-4 mt-6">
    <button 
      (click)="prevPage()" 
      [disabled]="currentPageIndex() === 0" 
      class="px-8 py-3 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 transition-all duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:opacity-50">
      Previous
    </button>
    <button 
      (click)="nextPage()" 
      [disabled]="currentPageIndex() === totalPages() - 1" 
      class="px-8 py-3 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 transition-all duration-300 disabled:bg-gray-600 disabled:cursor-not-allowed disabled:opacity-50">
      Next
    </button>
  </div>
</section>
